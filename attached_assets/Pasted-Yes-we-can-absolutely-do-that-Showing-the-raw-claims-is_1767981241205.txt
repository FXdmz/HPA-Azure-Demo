Yes, we can absolutely do that. Showing the raw claims is the fastest way to debug "Who am I?" and "Why don't I have permissions?"

Here is the updated **`Header.tsx`** component. I have added a **"Identity Debugger"** toggle right next to the user's name.

### **What this adds:**

1. **IAM Source:** Displays exactly who issued the token (e.g., `login.microsoftonline.com/{tenant_id}`).
2. **Auth Method (IDP):** Shows if you logged in via Work Account, Personal Account, or Social.
3. **Raw Claims:** A toggle button to inspect the full JSON payload of your identity token.

### **The Code**

Copy and paste this into `src/components/Header.tsx`.

```tsx
import React, { useState } from 'react';
import { useMsal } from "@azure/msal-react";

export function Header() {
  const { accounts } = useMsal();
  const account = accounts[0];
  const claims = account?.idTokenClaims as any;
  const [showDebug, setShowDebug] = useState(false);

  // HELPER: Determine the "Friendly" IAM Name
  const getIamSource = (claims: any) => {
    if (!claims) return "Unknown";
    if (claims.idp === "live.com") return "Microsoft Personal (Live.com)";
    if (claims.idp) return claims.idp; // Google, Facebook, etc.
    // If 'idp' is missing, it's usually a native Work/School account
    return "Azure AD (Work/School)";
  };

  return (
    <header className="bg-white border-b px-6 py-3 flex justify-between items-center shadow-sm">
      {/* LEFT: Branding */}
      <div className="flex items-center gap-3">
        <div className="bg-blue-600 text-white font-bold rounded-lg w-10 h-10 flex items-center justify-center">
            AI
        </div>
        <div>
            <h1 className="font-semibold text-gray-800">Aescher Agent</h1>
            <p className="text-xs text-gray-500">Azure AI Foundry</p>
        </div>
      </div>

      {/* RIGHT: User Identity & Debugger */}
      <div className="flex items-center gap-4">
        
        {account ? (
          <div className="relative">
            {/* User Profile Summary */}
            <div 
                className="text-right cursor-pointer hover:bg-gray-50 p-2 rounded transition"
                onClick={() => setShowDebug(!showDebug)}
                title="Click to view Raw Identity Token"
            >
                <div className="font-medium text-sm flex items-center justify-end gap-2">
                    {account.name}
                    {/* Role Badge */}
                    {claims?.roles?.includes("App.Admin") && (
                        <span className="bg-green-100 text-green-700 text-[10px] px-1.5 py-0.5 rounded border border-green-200 uppercase tracking-wider font-bold">
                            ADMIN
                        </span>
                    )}
                </div>
                
                {/* IAM Source Label */}
                <div className="text-xs text-blue-600 font-mono mt-0.5">
                    IAM: {getIamSource(claims)}
                </div>
            </div>

            {/* POPUP: Raw Token Debugger */}
            {showDebug && (
                <div className="absolute right-0 top-full mt-2 w-96 bg-gray-800 text-green-400 p-4 rounded-lg shadow-xl text-xs font-mono z-50 overflow-hidden border border-gray-700">
                    <div className="flex justify-between items-center mb-2 border-b border-gray-700 pb-2">
                        <span className="text-white font-bold">üîê RAW ID TOKEN CLAIMS</span>
                        <button onClick={() => setShowDebug(false)} className="text-gray-400 hover:text-white">‚úï</button>
                    </div>
                    
                    <div className="space-y-1 overflow-auto max-h-64">
                        <p><span className="text-purple-400">iss (Issuer):</span> {claims.iss}</p>
                        <p><span className="text-purple-400">oid (User ID):</span> {claims.oid}</p>
                        <p><span className="text-purple-400">tid (Tenant):</span> {claims.tid}</p>
                        <p><span className="text-purple-400">roles:</span> {JSON.stringify(claims.roles || "None")}</p>
                        <div className="border-t border-gray-700 my-2 pt-2">
                            <span className="text-gray-500">// Full Payload:</span>
                            <pre className="whitespace-pre-wrap break-all text-[10px] text-gray-400 mt-1">
                                {JSON.stringify(claims, null, 2)}
                            </pre>
                        </div>
                    </div>
                </div>
            )}
          </div>
        ) : (
          <div className="text-sm text-gray-400">Not Signed In</div>
        )}

        {/* Avatar Circle */}
        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold shadow-inner">
            {account?.name ? account.name.charAt(0) : "?"}
        </div>

      </div>
    </header>
  );
}

```

### **How to use it:**

1. **Look at the Header:** You will now see `IAM: Azure AD` (or similar) directly under your name.
2. **Click your Name:** A dark "Hacker Mode" panel will drop down.
3. **Inspect `roles`:** Look for the line that says `roles: [...]`.
* If it says `roles: "None"`, you haven't assigned the role in the Enterprise App portal yet.
* If you see `["App.Admin"]`, your code is receiving the permission correctly.